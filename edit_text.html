<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Edt-o</title>
	<style type="text/css">
	   *{
		margin: 0;
	   }
	   body{ 
		text-align: center;
		font-family: Verdana, Arial, Helvetica, sans-serif; 
		font-size: 12px;
		display: flex;
		flex-direction: column;
	   }
	   header{
		height: 10vh;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-content: center;
		background: rgb(253,29,29);
		background: linear-gradient(30deg, rgba(253,29,29,1) 0%, rgba(252,176,69,1) 100%);
		color: white;
	   }
	   button{
		height: 10vh;
        width: 100%;
		background-color: initial;
		border: 0;
		color: white;
		font-size: 14px;
		font-family: Verdana, Arial, Helvetica, sans-serif;
		font-weight: 900;
		cursor: pointer;
	   }
	   button:hover{
		background-color: initial;
		background-color: rgba(0, 0, 0, .2);
	   }
	   textarea{ 
		width: 100%;
		height: 30vh;
		resize: none;
		font-size: inherit;
		font-family: inherit;
		overflow-y: scroll;
		box-sizing: border-box;
	   }
	   p{ 
		text-align: left;
		padding: 5px 10px;
	   }
	   .control{
		width: 100%;
		height: 10vh;
		background: rgb(253,29,29);
		background: linear-gradient(30deg, rgba(253,29,29,1) 0%, rgba(252,176,69,1) 100%);

	   }
	   .result{
		overflow-y: scroll;
		width: 100%;
		height: 50vh;
		margin: 0 auto;
		border-width: 1px;
		border-style: solid;
		box-sizing: border-box;
	   }
  </style>
</head>
<body>

<header><h1>Tfoxs</h1><h3 class="description">(BETA v1.0.) Правим текст вместе (После обработки текст копируется в буфер обмена)</h3></header>
<textarea id="textarea" name="comment" cols="70" rows="10" placeholder='Вставьте текст...'></textarea>
<div class="control"><button onclick="fff()">Обработать</button></div>
<div class="result"><p id="new"></p></div>


<script type="text/javascript">
  function fff() {

      let textarea = document.getElementById('textarea');
      let text = textarea.value;
      let newtext = text.replace(/\n/g, "<br>")
      newtext = newtext.replace(/\s+/g, " ")
      newtext = newtext.replace(/(^\s*)|(\s*$)/g, "")
	  
      newtext = newtext.replace(/(^… )|(…)/g, "...")
      newtext = newtext.replace(/\?{3,}/g, "azu")
      newtext = newtext.replace(/!{3,}/g, "zazu")
      newtext = newtext.replace(/\?{1,2}/g, "?")
      newtext = newtext.replace(/!{1,2}/g, "!")
      newtext = newtext.replace(/zazu/g, "!!!")
      newtext = newtext.replace(/azu/g, "???")
	  
      newtext = newtext.replace(/(\.+[\s.]*\.+)+/g, "...")
      newtext = newtext.replace(/\.([a-zA-Zа-яА-Я])/g, ". $1")
      newtext = newtext.replace(/([a-zA-Zа-яА-Я])\s+\./g, "$1.")
      newtext = newtext.replace(/[!?]*(!+\?+)[!?]*/g, "?!")
	  
      newtext = newtext.replace(/[?.]*(\.+\?+)[?.]*|[?.]*(\?+\.+)[?.]*/g, "?..")
      newtext = newtext.replace(/[!.]*(\.+!+)[!.]*|[!.]*(!+\.+)[!.]*/g, "!..")
      newtext = newtext.replace(/[.!?]*(\.+!+\?+|\.+\?+!+|\?+\.+!+|\?+!+\.+|!+\.+\?+|!+\?+\.+)[.!?]*/g, "?!.")

      // alert(newtext);
      document.getElementById('new').innerHTML = newtext;
      navigator.clipboard.writeText(newtext.replace(/<br>/g, "\n"))

      // str = str.replace(/(\w+)\s(\w+)/, '$2, $1');



  }
</script>

</body>
</html>
